<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ErrorDemo Source Map Visualization - Complete Pipeline</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1600px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.2em;
      opacity: 0.9;
    }

    .content {
      padding: 30px;
    }

    .pipeline {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin: 30px 0;
    }

    .pipeline-step {
      border: 3px solid #e0e0e0;
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s;
    }

    .pipeline-step:hover {
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      transform: translateY(-2px);
    }

    .step-header {
      background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
      color: white;
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 1.3em;
      font-weight: bold;
    }

    .step-number {
      background: rgba(255,255,255,0.2);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5em;
      font-weight: bold;
    }

    .step-body {
      padding: 25px;
      background: white;
    }

    .code-display {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 20px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.8;
      overflow-x: auto;
      margin: 15px 0;
    }

    .code-display h4 {
      color: #4ec9b0;
      margin-bottom: 15px;
      font-size: 1em;
    }

    .code-line {
      display: flex;
      gap: 15px;
      padding: 2px 0;
    }

    .line-number {
      color: #858585;
      text-align: right;
      min-width: 30px;
      user-select: none;
    }

    .line-content {
      flex: 1;
    }

    .keyword { color: #569cd6; }
    .string { color: #ce9178; }
    .function { color: #dcdcaa; }
    .comment { color: #6a9955; }
    .tag { color: #4ec9b0; }
    .attr { color: #9cdcfe; }
    .value { color: #ce9178; }
    .error-highlight {
      background: rgba(255, 107, 107, 0.3);
      border-left: 3px solid #ff6b6b;
      padding-left: 5px;
    }

    .highlight-var {
      background: rgba(255, 215, 0, 0.3);
      border-bottom: 2px solid #ffd700;
      padding: 2px 4px;
      border-radius: 3px;
      font-weight: bold;
    }

    .arrow-down {
      text-align: center;
      font-size: 3em;
      color: #ff6b6b;
      margin: 20px 0;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(10px); }
    }

    .transformation-info {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      border-radius: 4px;
      margin: 15px 0;
    }

    .transformation-info strong {
      color: #856404;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }

    .comparison-box {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      overflow: hidden;
    }

    .comparison-header {
      background: #f5f5f5;
      padding: 12px 15px;
      font-weight: bold;
      color: #333;
      border-bottom: 2px solid #e0e0e0;
    }

    .comparison-body {
      padding: 15px;
      background: #1e1e1e;
      color: #d4d4d4;
      font-family: monospace;
      font-size: 13px;
      line-height: 1.6;
      min-height: 150px;
    }

    .error-box {
      background: #f8d7da;
      border-left: 4px solid #dc3545;
      padding: 15px;
      border-radius: 4px;
      margin: 15px 0;
    }

    .error-box strong {
      color: #721c24;
    }

    .success-box {
      background: #d4edda;
      border-left: 4px solid #28a745;
      padding: 15px;
      border-radius: 4px;
      margin: 15px 0;
    }

    .success-box strong {
      color: #155724;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .stat-box {
      background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%);
      color: white;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }

    .stat-number {
      font-size: 2.5em;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 0.9em;
      opacity: 0.9;
    }

    .mapping-line {
      display: flex;
      align-items: center;
      gap: 20px;
      margin: 15px 0;
      padding: 15px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .mapping-item {
      flex: 1;
      text-align: center;
    }

    .mapping-item-label {
      font-size: 11px;
      color: #666;
      text-transform: uppercase;
      margin-bottom: 5px;
    }

    .mapping-item-value {
      font-family: monospace;
      font-size: 16px;
      font-weight: bold;
      color: #ff6b6b;
      background: #f0f0f0;
      padding: 8px 12px;
      border-radius: 6px;
      display: inline-block;
    }

    .mapping-arrow {
      font-size: 2em;
      color: #c92a2a;
    }

    @media (max-width: 768px) {
      .comparison-grid {
        grid-template-columns: 1fr;
      }

      .header h1 {
        font-size: 1.8em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üêõ ErrorDemo Source Map Pipeline</h1>
      <p>See how error-throwing code transforms from Vue template to minified JavaScript</p>
    </div>

    <div class="content">

      <!-- Info Box -->
      <div class="error-box">
        <strong>üìò Real Error Code Example</strong><br>
        This visualization uses the actual ErrorDemo component that throws a real error!
        You'll see how <code>console.log(obj.nonExistent.property)</code> at line 25 transforms through the build pipeline
        and how source maps help the browser show you the original error location.
      </div>

      <!-- Build Pipeline -->
      <div class="pipeline">

        <!-- Step 1: Original Vue File -->
        <div class="pipeline-step">
          <div class="step-header">
            <div class="step-number">1</div>
            <div>
              <div>Original Vue Source Code</div>
              <div style="font-size: 0.7em; opacity: 0.9; font-weight: normal;">What you write in ErrorDemo.vue</div>
            </div>
          </div>
          <div class="step-body">
            <div class="code-display">
              <h4>üìÑ src/components/ErrorDemo.vue</h4>
              <div class="code-line">
                <span class="line-number">22</span>
                <span class="line-content"><span class="keyword">const</span> <span class="function">triggerError</span> = () => {</span>
              </div>
              <div class="code-line">
                <span class="line-number">23</span>
                <span class="line-content">  <span class="keyword">const</span> obj: <span class="keyword">any</span> = <span class="keyword">undefined</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">24</span>
                <span class="line-content">  <span class="comment">// This line will throw: Cannot read property 'nonExistent' of undefined</span></span>
              </div>
              <div class="code-line error-highlight">
                <span class="line-number">25</span>
                <span class="line-content">  <span class="function">console.log</span>(obj.<span style="color: #ff6b6b;">nonExistent</span>.<span style="color: #ff6b6b;">property</span>)  <span class="comment">‚Üê ‚ö†Ô∏è ERROR HERE!</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">26</span>
                <span class="line-content">  result.value = <span class="string">'This should not appear'</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">27</span>
                <span class="line-content">}</span>
              </div>
            </div>

            <div class="transformation-info">
              <strong>üìù What you see:</strong> Clean, readable TypeScript function.<br>
              <strong>üéØ Key elements:</strong> Function <code>triggerError</code>, variable <code>obj</code>, error at line 25
            </div>
          </div>
        </div>

        <div class="arrow-down">‚Üì</div>

        <!-- Step 2: Vue Compiler -->
        <div class="pipeline-step">
          <div class="step-header">
            <div class="step-number">2</div>
            <div>
              <div>Vue Compiler Transformation</div>
              <div style="font-size: 0.7em; opacity: 0.9; font-weight: normal;">TypeScript ‚Üí JavaScript</div>
            </div>
          </div>
          <div class="step-body">
            <div class="code-display">
              <h4>‚öôÔ∏è Compiled JavaScript (Generated by Vue)</h4>
              <div class="code-line">
                <span class="line-number">1</span>
                <span class="line-content"><span class="keyword">const</span> <span class="highlight-var">result</span> = <span class="function">ref</span>(<span class="string">''</span>)</span>
              </div>
              <div class="code-line">
                <span class="line-number">2</span>
                <span class="line-content"></span>
              </div>
              <div class="code-line">
                <span class="line-number">3</span>
                <span class="line-content"><span class="keyword">const</span> <span class="highlight-var">triggerError</span> = () => {</span>
              </div>
              <div class="code-line">
                <span class="line-number">4</span>
                <span class="line-content">  <span class="keyword">const</span> obj = <span class="keyword">undefined</span></span>
              </div>
              <div class="code-line error-highlight">
                <span class="line-number">5</span>
                <span class="line-content">  <span class="highlight-var">console</span>.<span class="function">log</span>(obj.<span style="color: #ff6b6b;">nonExistent</span>.<span style="color: #ff6b6b;">property</span>)  <span class="comment">‚Üê Still identifiable!</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">6</span>
                <span class="line-content">  <span class="highlight-var">result</span>.value = <span class="string">'This should not appear'</span></span>
              </div>
              <div class="code-line">
                <span class="line-number">7</span>
                <span class="line-content">}</span>
              </div>
            </div>

            <div class="transformation-info">
              <strong>üîß What happened:</strong> TypeScript types removed, Vue compiler processed it.<br>
              <strong>‚ú® Identifiers preserved:</strong>
              <code>triggerError</code>, <code>result</code>, <code>console</code>, <code>obj</code><br>
              <strong>üìç Error location:</strong> Still clear at line 5 in compiled output
            </div>
          </div>
        </div>

        <div class="arrow-down">‚Üì</div>

        <!-- Step 3: Minification -->
        <div class="pipeline-step">
          <div class="step-header">
            <div class="step-number">3</div>
            <div>
              <div>Minification (Terser)</div>
              <div style="font-size: 0.7em; opacity: 0.9; font-weight: normal;">Compresses code for production</div>
            </div>
          </div>
          <div class="step-body">
            <div class="comparison-grid">
              <div class="comparison-box">
                <div class="comparison-header">Before Minification</div>
                <div class="comparison-body">
const <span class="highlight-var">triggerError</span> = () => {<br>
&nbsp;&nbsp;const obj = undefined<br>
&nbsp;&nbsp;<span class="highlight-var">console</span>.log(<br>
&nbsp;&nbsp;&nbsp;&nbsp;obj.nonExistent.property<br>
&nbsp;&nbsp;)<br>
&nbsp;&nbsp;<span class="highlight-var">result</span>.value = 'This...'<br>
}
                </div>
              </div>

              <div class="comparison-box">
                <div class="comparison-header">After Minification</div>
                <div class="comparison-body">
const <span class="highlight-var">c</span>=()=>{<br>
<span class="highlight-var">console</span>.log(<br>
(void 0).nonExistent.property<br>
),<br>
<span class="highlight-var">n</span>.value="This..."<br>
}
                </div>
              </div>
            </div>

            <div class="error-box">
              <strong>üóúÔ∏è Minification changes:</strong><br>
              ‚Ä¢ <code>triggerError</code> ‚Üí <code>d</code> (function name shortened)<br>
              ‚Ä¢ <code>result</code> ‚Üí <code>n</code> (variable shortened)<br>
              ‚Ä¢ <code>undefined</code> ‚Üí <code>void 0</code> (optimized)<br>
              ‚Ä¢ <code>console</code> ‚Üí stays <code>console</code> (global object)<br>
              ‚Ä¢ All whitespace removed, everything on one line
            </div>

            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; margin: 15px 0;">
              <h3 style="margin-bottom: 15px; color: #333;">Variable Name Mapping:</h3>

              <div class="mapping-line">
                <div class="mapping-item">
                  <div class="mapping-item-label">Before</div>
                  <div class="mapping-item-value">triggerError</div>
                </div>
                <div class="mapping-arrow">‚Üí</div>
                <div class="mapping-item">
                  <div class="mapping-item-label">After</div>
                  <div class="mapping-item-value">d</div>
                </div>
                <div class="mapping-item">
                  <div class="mapping-item-label">Saved</div>
                  <div class="mapping-item-value" style="background: #d4edda; color: #28a745;">11 chars</div>
                </div>
              </div>

              <div class="mapping-line">
                <div class="mapping-item">
                  <div class="mapping-item-label">Before</div>
                  <div class="mapping-item-value">result</div>
                </div>
                <div class="mapping-arrow">‚Üí</div>
                <div class="mapping-item">
                  <div class="mapping-item-label">After</div>
                  <div class="mapping-item-value">n</div>
                </div>
                <div class="mapping-item">
                  <div class="mapping-item-label">Saved</div>
                  <div class="mapping-item-value" style="background: #d4edda; color: #28a745;">5 chars</div>
                </div>
              </div>

              <div class="mapping-line">
                <div class="mapping-item">
                  <div class="mapping-item-label">Before</div>
                  <div class="mapping-item-value">console</div>
                </div>
                <div class="mapping-arrow">‚Üí</div>
                <div class="mapping-item">
                  <div class="mapping-item-label">After</div>
                  <div class="mapping-item-value">console</div>
                </div>
                <div class="mapping-item">
                  <div class="mapping-item-label">Note</div>
                  <div class="mapping-item-value" style="background: #e3f2fd; color: #1976d2;">Global</div>
                </div>
              </div>
            </div>

            <div class="stats-grid">
              <div class="stat-box">
                <div class="stat-number">680</div>
                <div class="stat-label">Bytes (Minified)</div>
              </div>
              <div class="stat-box">
                <div class="stat-number">~70%</div>
                <div class="stat-label">Size Reduction</div>
              </div>
              <div class="stat-box">
                <div class="stat-number">1</div>
                <div class="stat-label">Line of Code</div>
              </div>
            </div>
          </div>
        </div>

        <div class="arrow-down">‚Üì</div>

        <!-- Step 4: Source Map -->
        <div class="pipeline-step">
          <div class="step-header">
            <div class="step-number">4</div>
            <div>
              <div>Source Map Generation</div>
              <div style="font-size: 0.7em; opacity: 0.9; font-weight: normal;">The magic that connects everything</div>
            </div>
          </div>
          <div class="step-body">
            <div class="code-display">
              <h4>üó∫Ô∏è ErrorDemo-B2zXc7pz.js.map</h4>
              <pre style="color: #d4d4d4; margin: 0; white-space: pre-wrap; word-wrap: break-word;">{
  "version": 3,
  "file": "ErrorDemo-B2zXc7pz.js",
  "sources": ["../../src/components/ErrorDemo.vue"],
  "sourcesContent": ["&lt;template&gt;...full source..."],
  <span class="highlight-var">"names": [
    "result",
    "ref",
    "triggerError",
    "console",
    "log",
    "nonExistent",
    "property",
    "value",
    ...
  ]</span>,
  <span class="highlight-var">"mappings": "kLA0BA,MAAMA,EAASC..."</span>
}</pre>
            </div>

            <div class="success-box">
              <strong>üéØ Source Map Components:</strong><br>
              ‚Ä¢ <strong>sources</strong>: Points to <code>../../src/components/ErrorDemo.vue</code><br>
              ‚Ä¢ <strong>sourcesContent</strong>: Contains your FULL original Vue file<br>
              ‚Ä¢ <strong>names</strong>: Array with <code>["result", "ref", "triggerUndefinedError", "console", ...]</code><br>
              ‚Ä¢ <strong>mappings</strong>: Encoded data connecting minified positions to original line 33
            </div>

            <div class="transformation-info">
              <strong>üí° How it tracks the error:</strong><br>
              When <code>console.log((void 0).nonExistent.property)</code> throws an error in the minified code,
              the source map says: "This came from ErrorDemo.vue line 25, inside function <code>triggerError</code>"
            </div>
          </div>
        </div>

        <div class="arrow-down">‚Üì</div>

        <!-- Step 4.5: How Mappings Work -->
        <div class="pipeline-step">
          <div class="step-header">
            <div class="step-number">4.5</div>
            <div>
              <div>üî¨ How Mappings Actually Work</div>
              <div style="font-size: 0.7em; opacity: 0.9; font-weight: normal;">Decoding the magic string</div>
            </div>
          </div>
          <div class="step-body">

            <div class="transformation-info">
              <strong>üéØ The Mission:</strong> Convert this cryptic string into usable data<br>
              <code style="background: #f5f5f5; padding: 5px; border-radius: 3px;">"wKAkBA,MAAMA,EAASC..."</code>
              <br><br>This encodes the position of EVERY identifier in your minified code!
            </div>

            <div class="code-display">
              <h4>üìä The Actual Mappings String from ErrorDemo</h4>
              <pre style="margin: 0; color: #d4d4d4; white-space: pre-wrap; word-wrap: break-word;">wKAkBA,MAAMA,EAASC,EAAY,IAGrBC,EAAe,KAGnBC,QAAQC,UAFS,GAEDC,YAAYC,UAC5BN,EAAOO,MAAQ</pre>
            </div>

            <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; border-radius: 4px; margin: 20px 0;">
              <strong>üîç What does this mean?</strong><br><br>
              ‚Ä¢ <strong>Commas (,)</strong> separate each mapping point<br>
              ‚Ä¢ <strong>No semicolons</strong> because minified code is all on 1 line<br>
              ‚Ä¢ Each segment uses <strong>Base64 VLQ encoding</strong> (Variable Length Quantity)<br>
              ‚Ä¢ Values are <strong>RELATIVE</strong> (deltas), not absolute positions
            </div>

            <h3 style="margin: 30px 0 20px 0; color: #333;">Step-by-Step: Decoding One Mapping</h3>

            <div style="background: #f9f9f9; padding: 25px; border-radius: 8px; margin: 20px 0;">
              <h4 style="color: #ff6b6b; margin-bottom: 15px;">Example: Decoding "MAAMA"</h4>

              <div style="margin: 20px 0;">
                <strong>Step 1: Convert Base64 VLQ to numbers</strong>
                <div style="background: white; padding: 15px; border-radius: 6px; margin-top: 10px; font-family: monospace;">
                  "MAAMA" ‚Üí VLQ Decoder ‚Üí <span style="color: #28a745; font-weight: bold;">[6, 0, 0, 6, 0]</span>
                </div>
              </div>

              <div style="margin: 20px 0;">
                <strong>Step 2: Interpret the values</strong>
                <div style="background: #d4edda; padding: 15px; border-radius: 6px; margin-top: 10px; border: 2px solid #28a745;">
                  <div style="margin: 10px 0;"><strong>[0] = 6</strong> ‚Üí Move 6 columns right in minified code</div>
                  <div style="margin: 10px 0;"><strong>[1] = 0</strong> ‚Üí Same source file (ErrorDemo.vue)</div>
                  <div style="margin: 10px 0;"><strong>[2] = 0</strong> ‚Üí Same line in original</div>
                  <div style="margin: 10px 0;"><strong>[3] = 6</strong> ‚Üí Move 6 columns right in original</div>
                  <div style="margin: 10px 0;"><strong>[4] = 0</strong> ‚Üí Name index 0 (result)</div>
                </div>
              </div>
            </div>

            <h3 style="margin: 30px 0 20px 0; color: #333;">Complete Decoded Mappings (First 7)</h3>

            <div style="overflow-x: auto;">
              <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
                <thead>
                  <tr style="background: linear-gradient(135deg, #ff6b6b 0%, #c92a2a 100%); color: white;">
                    <th style="padding: 12px; text-align: left;">#</th>
                    <th style="padding: 12px; text-align: left;">Segment</th>
                    <th style="padding: 12px; text-align: left;">Decoded</th>
                    <th style="padding: 12px; text-align: left;">Minified Col</th>
                    <th style="padding: 12px; text-align: center;">‚Üí</th>
                    <th style="padding: 12px; text-align: left;">Original Line:Col</th>
                    <th style="padding: 12px; text-align: left;">Name</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="background: #f9f9f9;">
                    <td style="padding: 10px; border: 1px solid #ddd;">1</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; background: #764ba2; color: white; font-weight: bold;">wKAkBA</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px;">[184,0,18,2,0]</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #ff6b6b;">184</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 1.2em;">‚Üí</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #28a745;">19:2</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;"><strong>result</strong></td>
                  </tr>
                  <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;">2</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; background: #764ba2; color: white; font-weight: bold;">MAAMA</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px;">[6,0,0,6,0]</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #ff6b6b;">190</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 1.2em;">‚Üí</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #28a745;">19:8</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;"><strong>result</strong></td>
                  </tr>
                  <tr style="background: #f9f9f9;">
                    <td style="padding: 10px; border: 1px solid #ddd;">3</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; background: #764ba2; color: white; font-weight: bold;">EAASC</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px;">[2,0,0,9,1]</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #ff6b6b;">192</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 1.2em;">‚Üí</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #28a745;">19:17</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;"><strong>ref</strong></td>
                  </tr>
                  <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;">4</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; background: #764ba2; color: white; font-weight: bold;">EAAY</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px;">[2,0,0,12]</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #ff6b6b;">194</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 1.2em;">‚Üí</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #28a745;">19:29</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-style: italic; color: #999;">‚Äî</td>
                  </tr>
                  <tr style="background: #fff3cd; border-left: 4px solid #ffc107;">
                    <td style="padding: 10px; border: 1px solid #ddd;">5</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; background: #764ba2; color: white; font-weight: bold;">IAGrBC</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px;">[4,0,3,-8,1]</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #ff6b6b;">198</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 1.2em;">‚Üí</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #28a745;">22:21</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;"><strong>triggerError</strong></td>
                  </tr>
                  <tr>
                    <td style="padding: 10px; border: 1px solid #ddd;">6</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; background: #764ba2; color: white; font-weight: bold;">EAAe</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px;">[2,0,0,15]</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #ff6b6b;">200</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 1.2em;">‚Üí</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #28a745;">22:36</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-style: italic; color: #999;">‚Äî</td>
                  </tr>
                  <tr style="background: #ffe6e6; border-left: 4px solid #ff6b6b;">
                    <td style="padding: 10px; border: 1px solid #ddd;">7</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; background: #764ba2; color: white; font-weight: bold;">KAGnBC</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px;">[5,0,3,-7,1]</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #ff6b6b;">205</td>
                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 1.2em;">‚Üí</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace; color: #28a745;">25:29</td>
                    <td style="padding: 10px; border: 1px solid #ddd; font-family: monospace;"><strong>console</strong> ‚Üê ERROR!</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div style="background: #d4edda; border-left: 4px solid #28a745; padding: 20px; border-radius: 4px; margin: 30px 0;">
              <strong style="color: #155724;">üéØ How Browser Uses This When Error Occurs</strong><br><br>

              When error at <strong style="color: #ff6b6b;">minified position 205</strong>:<br><br>

              1Ô∏è‚É£ Browser scans mappings until position 205<br>
              2Ô∏è‚É£ Finds mapping #7: <code>KAGnBC</code> ‚Üí <code>[5, 0, 3, -7, 1]</code><br>
              3Ô∏è‚É£ Calculates accumulated position: Column 205<br>
              4Ô∏è‚É£ Maps to: <strong style="color: #28a745;">ErrorDemo.vue Line 25, Column 29</strong><br>
              5Ô∏è‚É£ Looks up name index 1 ‚Üí <code>"console"</code><br>
              6Ô∏è‚É£ Shows: <code style="background: #f5f5f5; padding: 3px 6px; border-radius: 3px;">console.log(...)</code> at ErrorDemo.vue:25 ‚úÖ
            </div>

            <h3 style="margin: 30px 0 20px 0; color: #333;">Why Relative Values (Deltas)?</h3>

            <div class="comparison-grid">
              <div class="comparison-box">
                <div class="comparison-header" style="background: #f8d7da; color: #721c24;">‚ùå Absolute Positions</div>
                <div class="comparison-body" style="background: white; color: #333; font-size: 13px;">
[184, 0, 19, 2, 0]<br>
[190, 0, 19, 8, 0]<br>
[192, 0, 19, 17, 1]<br>
[194, 0, 19, 29, 1]<br>
<br>
<span style="color: #721c24;">‚ùå Large numbers</span><br>
<span style="color: #721c24;">‚ùå Line 19 repeated</span><br>
<span style="color: #721c24;">‚ùå More bytes needed</span>
                </div>
              </div>

              <div class="comparison-box">
                <div class="comparison-header" style="background: #d4edda; color: #155724;">‚úÖ Relative Deltas</div>
                <div class="comparison-body" style="background: white; color: #333; font-size: 13px;">
[184, 0, 19, 2, 0]<br>
[6, 0, 0, 6, 0]<br>
[2, 0, 0, 9, 1]<br>
[2, 0, 0, 12, 1]<br>
<br>
<span style="color: #155724;">‚úÖ Small numbers</span><br>
<span style="color: #155724;">‚úÖ 0 = no change</span><br>
<span style="color: #155724;">‚úÖ ~70% smaller!</span>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="arrow-down">‚Üì</div>

        <!-- Step 5: Browser -->
        <div class="pipeline-step">
          <div class="step-header">
            <div class="step-number">5</div>
            <div>
              <div>Browser DevTools Magic</div>
              <div style="font-size: 0.7em; opacity: 0.9; font-weight: normal;">How the browser shows you the original error</div>
            </div>
          </div>
          <div class="step-body">
            <div class="comparison-grid">
              <div class="comparison-box">
                <div class="comparison-header" style="background: #f8d7da; color: #721c24; border-color: #f5c6cb;">‚ùå Without Source Map</div>
                <div class="comparison-body" style="background: #1e1e1e; color: #ff6b6b;">
<span style="color: #ff6b6b;">TypeError: Cannot read properties of undefined</span><br>
&nbsp;&nbsp;at ErrorDemo-Bt10x05H.js:1:489<br>
&nbsp;&nbsp;at <span class="highlight-var">d</span> (unknown)<br><br>
<span style="color: #858585;">// What is 'd'?</span><br>
<span style="color: #858585;">// Where in the minified blob?</span><br>
<span style="color: #858585;">// Impossible to debug!</span>
                </div>
              </div>

              <div class="comparison-box">
                <div class="comparison-header" style="background: #d4edda; color: #155724; border-color: #c3e6cb;">‚úÖ With Source Map</div>
                <div class="comparison-body" style="background: #1e1e1e; color: #4ec9b0;">
<span style="color: #ff6b6b;">TypeError: Cannot read properties of undefined</span><br>
&nbsp;&nbsp;at ErrorDemo.vue:25:19<br>
&nbsp;&nbsp;at <span class="highlight-var">triggerError</span> (ErrorDemo.vue:22)<br><br>
<span style="color: #6a9955;">// Click to see:</span><br>
<span style="color: #4ec9b0;">console.log(obj.nonExistent.property)</span><br>
<span style="color: #858585;">// Line 33, exactly where you wrote it!</span>
                </div>
              </div>
            </div>

            <div class="success-box">
              <strong style="color: #155724;">‚ú® The Complete Journey:</strong><br><br>
              When error occurs in production at minified position:<br><br>
              1Ô∏è‚É£ Browser sees error in function <code>d</code><br>
              2Ô∏è‚É£ Reads <code>//# sourceMappingURL=ErrorDemo-Bt10x05H.js.map</code><br>
              3Ô∏è‚É£ Downloads and parses the source map<br>
              4Ô∏è‚É£ Looks up in <strong>names array</strong>: <code>d</code> ‚Üí <code>triggerError</code><br>
              5Ô∏è‚É£ Decodes <strong>mappings</strong>: position ‚Üí <code>ErrorDemo.vue Line 25</code><br>
              6Ô∏è‚É£ Shows you: <code>console.log(obj.nonExistent.property)</code> ‚Üê Your exact code!<br><br>
              <strong style="color: #155724;">üéØ Result:</strong> You debug your original Vue file, not minified JavaScript!
            </div>

            <div class="error-box">
              <strong>üéÆ Try It Yourself:</strong><br>
              1. Run <code>npm run preview</code><br>
              2. Open browser DevTools (F12)<br>
              3. Navigate to <code>/error-demo</code><br>
              4. Click "Trigger Undefined Error"<br>
              5. See the error point to <code>ErrorDemo.vue:25:19</code>!<br>
              6. Click it - browser shows your ORIGINAL code!
            </div>
          </div>
        </div>

      </div>

      <!-- Complete Example: Real Error Stack Trace Transformation -->
      <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 12px; margin-top: 40px; box-shadow: 0 8px 24px rgba(0,0,0,0.15);">
        <h2 style="margin: 0 0 25px 0; color: white; text-align: center; font-size: 1.8em;">
          üéØ Complete Example: Real Error Transformation
        </h2>

        <div style="background: white; padding: 30px; border-radius: 8px;">

          <!-- Step 1: Error Occurs -->
          <div style="margin-bottom: 35px;">
            <h3 style="color: #667eea; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
              <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">Step 1</span>
              Error Occurs in Browser
            </h3>
            <div style="background: #1e1e1e; color: #d4d4d4; padding: 20px; border-radius: 6px; font-family: monospace; font-size: 14px; border-left: 4px solid #ff6b6b;">
<span style="color: #ff6b6b;">TypeError: Cannot read properties of undefined (reading 'nonExistent')</span>
    at <span style="color: #ffd700;">d</span> (<span style="color: #4ec9b0;">ErrorDemo-Bt10x05H.js</span>:<span style="color: #b5cea8;">1</span>:<span style="color: #b5cea8;">211</span>)
    at Oe (runtime-core.esm-bundler.js:199:19)
    at Ie (runtime-core.esm-bundler.js:206:17)
    at HTMLButtonElement.n (runtime-dom.esm-bundler.js:730:5)
            </div>
            <div style="background: #fff3cd; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #ffc107;">
              <strong>üîç What we see:</strong><br>
              ‚Ä¢ Function name: <code>d</code> (meaningless!)<br>
              ‚Ä¢ File: <code>ErrorDemo-Bt10x05H.js:1:211</code><br>
              ‚Ä¢ Position 211 in the minified code<br>
              ‚Ä¢ No idea what the original code was!
            </div>
          </div>

          <!-- Step 2: Browser Reads Source Map URL -->
          <div style="margin-bottom: 35px;">
            <h3 style="color: #667eea; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
              <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">Step 2</span>
              Browser Checks for Source Map
            </h3>
            <div style="background: #f9f9f9; padding: 20px; border-radius: 6px; border-left: 4px solid #667eea;">
              <strong>Browser reads the last line of ErrorDemo-Bt10x05H.js:</strong>
              <div style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 6px; font-family: monospace; margin-top: 10px;">
//# sourceMappingURL=<span style="color: #ce9178;">ErrorDemo-Bt10x05H.js.map</span>
              </div>
            </div>
            <div style="background: #e3f2fd; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #2196f3;">
              <strong>‚úÖ Source map found!</strong> Browser will now download <code>ErrorDemo-Bt10x05H.js.map</code>
            </div>
          </div>

          <!-- Step 3: Browser Downloads & Parses Source Map -->
          <div style="margin-bottom: 35px;">
            <h3 style="color: #667eea; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
              <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">Step 3</span>
              Parse Source Map (5-10ms)
            </h3>
            <div style="background: #1e1e1e; color: #d4d4d4; padding: 20px; border-radius: 6px; font-family: monospace; font-size: 13px; overflow-x: auto;">
{
  <span style="color: #9cdcfe;">"version"</span>: <span style="color: #b5cea8;">3</span>,
  <span style="color: #9cdcfe;">"file"</span>: <span style="color: #ce9178;">"ErrorDemo-Bt10x05H.js"</span>,
  <span style="color: #9cdcfe;">"sources"</span>: [<span style="color: #ce9178;">"../../src/components/ErrorDemo.vue"</span>],
  <span style="color: #9cdcfe;">"names"</span>: [<span style="color: #ce9178;">"result"</span>, <span style="color: #ce9178;">"ref"</span>, <span style="color: #ce9178;">"triggerError"</span>, <span style="color: #ce9178;">"console"</span>, ...],
  <span style="color: #9cdcfe;">"mappings"</span>: <span style="color: #ce9178;">"wKAkBA,MAAMA,EAASC,EAAY..."</span>
}
            </div>
            <div style="background: #d4edda; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #28a745;">
              <strong>üîß Browser decodes mappings string:</strong><br>
              Creates lookup table: { 184‚Üí19:2, 190‚Üí19:8, 192‚Üí19:17, 198‚Üí22:21, 205‚Üí25:29, ... }
            </div>
          </div>

          <!-- Step 4: Look Up Position 211 -->
          <div style="margin-bottom: 35px;">
            <h3 style="color: #667eea; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
              <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">Step 4</span>
              Binary Search for Position 211 (0.001ms)
            </h3>
            <div style="background: #f9f9f9; padding: 20px; border-radius: 6px; border-left: 4px solid #ff6b6b;">
              <strong>üîç Browser searches: "Where does position 211 map to?"</strong>
              <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 6px; font-family: monospace; font-size: 13px;">
Position 184 ‚Üí ErrorDemo.vue:19:2 ‚ùå too early<br>
Position 190 ‚Üí ErrorDemo.vue:19:8 ‚ùå too early<br>
Position 192 ‚Üí ErrorDemo.vue:19:17 ‚ùå too early<br>
Position 198 ‚Üí ErrorDemo.vue:22:21 ‚ùå too early<br>
Position 200 ‚Üí ErrorDemo.vue:22:36 ‚ùå too early<br>
<strong style="color: #28a745;">Position 205 ‚Üí ErrorDemo.vue:25:29 ‚úÖ FOUND!</strong><br>
              </div>
            </div>
            <div style="background: #fff3cd; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #ffc107;">
              <strong>üí° Why position 205 covers 211?</strong><br>
              Position 205 is the start of <code>console.log(...)</code>. Position 211 falls within that statement, so it maps to the same original location.
            </div>
          </div>

          <!-- Step 5: Look Up Function Name -->
          <div style="margin-bottom: 35px;">
            <h3 style="color: #667eea; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
              <span style="background: #667eea; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">Step 5</span>
              Look Up Original Function Name
            </h3>
            <div style="background: #f9f9f9; padding: 20px; border-radius: 6px; border-left: 4px solid #764ba2;">
              <strong>üè∑Ô∏è Browser searches names array for function "d":</strong>
              <div style="margin-top: 15px;">
                <div style="display: grid; grid-template-columns: auto 1fr auto; gap: 15px; align-items: center; background: white; padding: 15px; border-radius: 6px; margin-bottom: 10px;">
                  <div style="font-family: monospace; font-size: 1.2em; color: #ff6b6b; font-weight: bold;">d</div>
                  <div style="text-align: center; color: #667eea; font-size: 1.5em;">‚Üí</div>
                  <div style="font-family: monospace; font-size: 1.2em; color: #28a745; font-weight: bold;">triggerError</div>
                </div>
              </div>
            </div>
            <div style="background: #e3f2fd; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid #2196f3;">
              <strong>üìã Mapping found:</strong> Minified function <code>d</code> = Original function <code>triggerError</code> (names[2])
            </div>
          </div>

          <!-- Step 6: Show Transformed Stack Trace -->
          <div style="margin-bottom: 0;">
            <h3 style="color: #667eea; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
              <span style="background: #28a745; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.9em;">Result</span>
              Browser Shows Readable Error
            </h3>

            <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 20px; align-items: center;">
              <!-- Before -->
              <div style="background: #f8d7da; padding: 20px; border-radius: 6px; border: 2px solid #ff6b6b;">
                <div style="color: #721c24; font-weight: bold; margin-bottom: 10px; text-align: center;">‚ùå Without Source Map</div>
                <div style="background: #1e1e1e; color: #ff6b6b; padding: 15px; border-radius: 4px; font-family: monospace; font-size: 12px;">
at <span style="color: #ffd700;">d</span> (ErrorDemo-Bt10x05H.js:1:211)
                </div>
                <div style="margin-top: 10px; font-size: 0.9em; color: #721c24;">
                  ‚ùì What is "d"?<br>
                  ‚ùì Where is position 211?
                </div>
              </div>

              <!-- Arrow -->
              <div style="font-size: 3em; color: #28a745; font-weight: bold;">‚Üí</div>

              <!-- After -->
              <div style="background: #d4edda; padding: 20px; border-radius: 6px; border: 2px solid #28a745;">
                <div style="color: #155724; font-weight: bold; margin-bottom: 10px; text-align: center;">‚úÖ With Source Map</div>
                <div style="background: #1e1e1e; color: #4ec9b0; padding: 15px; border-radius: 4px; font-family: monospace; font-size: 12px;">
at <span style="color: #ffd700;">triggerError</span> (ErrorDemo.vue:25)
                </div>
                <div style="margin-top: 10px; font-size: 0.9em; color: #155724;">
                  ‚úÖ Function: triggerError<br>
                  ‚úÖ File: ErrorDemo.vue line 25
                </div>
              </div>
            </div>

            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 6px; margin-top: 20px; text-align: center;">
              <strong style="font-size: 1.2em;">üéâ Success!</strong><br>
              <div style="margin-top: 10px; font-size: 1.1em;">
                You can now click on <code style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 4px;">ErrorDemo.vue:25</code> in DevTools<br>
                and see your exact original code: <code style="background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 4px;">console.log(obj.nonExistent.property)</code>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Summary -->
      <div style="background: #f9f9f9; padding: 25px; border-radius: 8px; margin-top: 30px;">
        <h2 style="margin-bottom: 20px; color: #333;">üìä Complete Transformation Summary</h2>

        <div class="stats-grid">
          <div class="stat-box" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
            <div class="stat-number">3</div>
            <div class="stat-label">Build Steps</div>
          </div>
          <div class="stat-box" style="background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);">
            <div class="stat-number">680</div>
            <div class="stat-label">Bytes (Minified)</div>
          </div>
          <div class="stat-box" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
            <div class="stat-number">2.1</div>
            <div class="stat-label">KB (Source Map)</div>
          </div>
          <div class="stat-box" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
            <div class="stat-number">100%</div>
            <div class="stat-label">Debuggable</div>
          </div>
        </div>

        <div class="success-box" style="margin-top: 20px;">
          <strong>üîë Key Takeaways:</strong><br>
          ‚Ä¢ The <strong>names array</strong> preserves identifier names from compiled JavaScript<br>
          ‚Ä¢ <strong>Mappings</strong> connect minified positions back to original source (line 33!)<br>
          ‚Ä¢ Source maps track transformations: Vue Compile + Minification<br>
          ‚Ä¢ <strong>.map files only download when DevTools is open</strong> - no impact on users!<br>
          ‚Ä¢ Errors show <strong>exact original location</strong>: <code>ErrorDemo.vue:25:19</code>
        </div>
      </div>

    </div>
  </div>
</body>
</html>
